/*! Puppetglasses - v0.1.0 - 2015-03-14
* https://github.com/tosmi/puppetglasses
* Copyright (c) 2015 Toni Schmidbauer; Licensed GPLv3 */
window.puppetglassesConfig={},puppetglassesConfig.puppetdb_url="http://localhost:2080/v3",function(){"use strict";function a(a){var b="";for(var c in a)a.hasOwnProperty(c)&&(b+=c+"=>"+a[c]+"\n");return b}function b(){g.column(2).visible(!0),$("#resource_table tbody tr").each(function(){var a=$("td",this)[2],b=$(a).text();this.setAttribute("title",b)}),g.column(2).visible(!1)}function c(c){$("#resources").show(),g.clear();for(var d=0;d<c.length;d++)g.row.add([c[d].type,c[d].title,a(c[d].parameters)]).draw();b(),g.search("").columns().search("").draw()}function d(){var a=$("#hostname").val(),b=puppetglassesConfig.puppetdb_url+"/nodes/"+a+"/resources";$("#data_table").remove(),$.get(b).done(c)}function e(a,b){for(var c=[],d=0;d<a.length;d++)c.push(a[d].name);b(c)}function f(a,b){var c=puppetglassesConfig.puppetdb_url+'/nodes?query=["~","name","'+a.term+'"]';$.getJSON(c).done(function(a){e(a,b)})}var g=$("#resource_table").DataTable({search:{caseInsensitive:!1},columnDefs:[{targets:2,searchable:!1}]});$("#resource_table").on("draw.dt",b),$("#resources").hide(),$("#search").click(d),$("#hostname").autocomplete({source:f})}();