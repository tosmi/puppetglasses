/*! Puppetglasses - v0.1.0 - 2015-03-15
* https://github.com/tosmi/puppetglasses
* Copyright (c) 2015 Toni Schmidbauer; Licensed GPLv3 */
window.puppetglassesConfig={},puppetglassesConfig.puppetdb_url="http://localhost:2080/v3",function(){"use strict";function a(a,c){var d=puppetglassesConfig.puppetdb_url+'/nodes?query=["~","name","'+a.term+'"]';$.getJSON(d).done(function(a){b(a,c)})}function b(a,b){for(var c=[],d=0;d<a.length;d++)c.push(a[d].name);b(c)}function c(){g.column(2).visible(!0),$("#resource_table tbody tr").each(function(){var a=$("td",this)[2],b=$(a).text();this.setAttribute("title",b)}),g.column(2).visible(!1)}function d(){var a=$("#hostname").val(),b=puppetglassesConfig.puppetdb_url+"/nodes/"+a+"/resources";$.get(b).done(e)}function e(a){g.clear();for(var b=0;b<a.length;b++)g.row.add([a[b].type,a[b].title,f(a[b].parameters)]);g.search("").columns().search("").draw(),c(),$("#resources").show()}function f(a){var b="";for(var c in a)a.hasOwnProperty(c)&&(b+=c+"=>"+a[c]+"\n");return b}var g=$("#resource_table").DataTable({search:{caseInsensitive:!1},columnDefs:[{targets:2,searchable:!1}]});$("#hostname").autocomplete({source:a}),$("#search").click(d),$("#resources").hide(),$("#resource_table").on("draw.dt",c)}();